function wechatShare(e,t){wx.config(e),wx.ready(function(){wx.onMenuShareAppMessage(t),wx.onMenuShareTimeline(t)})}function getWxShare(){$.ajax({type:"GET",url:route+"/wx/api/oauth/wxshare",success:function(e){1==e.code&&wechatShare(e.data,wxShareObj)},error:function(e){console.log("err",e)}})}function getData(e){$.ajax({type:"POST",url:route+ajaxurl,data:e,success:function(e){if(1==e.code){var t=e.original;$("#content").html(t.content),document.title=t.title,wxShareObj.title=t.title,wxShareObj.desc=t.content,wxShareObj.imgUrl=t.img,getWxShare(),shareObj.topName=t.title,shareObj.title=t.title,shareObj.image=t.img,shareObj.describe=t.content,shareObj.shareurl="",appShareWX(shareObj);var a=e.original.recommend;renderList(a)}},error:function(e){console.log(e)}})}function getList(e){$.ajax({type:"GET",url:route+"/costin/mapi/article/list",data:e,success:function(e){if(1==e.code){renderPageList(e.original.pageList);for(var t=e.original.pageCount,a="<option value=''>分页</option>",o=1;o<t+1;o++)o==e.original.pageIndex?a+="<option value="+o+" selected >第"+o+"页</option>":a+="<option value="+o+">第"+o+"页</option>";$("#toPage").html(a);var i=$("#toPage").val();1==i?$(".prev").css({background:"#eeeeee",color:"#666666"}):$(".prev").css({background:"#cb9555",color:"#FFFFFF"}),i==t?$(".next").css({background:"#eeeeee",color:"#666666"}):$(".next").css({background:"#cb9555",color:"#FFFFFF"}),$(".next").click(function(){var e=$("#toPage").val();e!=t?getList({pageIndex:++e}):toast("已是最后一页")}),$(".prev").click(function(){var e=$("#toPage").val();1!=e?getList({pageIndex:--e}):toast("已是第一页")}),$("#toPage").change(function(){var t=$(this).val();t!=e.original.pageIndex&&getList({pageIndex:t})})}},error:function(e){console.log(e)}})}function renderPageList(e){if(e.length>0){for(var t="",a=0;a<e.length;a++)t+='<li class="page" id='+e[a].articleidStr+'><img class="page-img" src='+e[a].imageUrl+' alt=""><div class="page-r"><div class="page-title"><p class="els2">'+e[a].title+'</p></div><div class="page-time">'+e[a].utime+"</div></div> </li>";$("#page-list").html(t)}$("#page-list li").click(function(){var e=$(this).attr("id");window.location.href="/app/article/detail/"+e+".html"})}function toast(e,t){t?t*=1e3:t=2e3;var a=$("<div id='toast'></div>");$("body").append(a);var o={display:"none",background:"rgba(0, 0, 0, 0.6)",position:"fixed","z-index":"10",width:"4rem","line-height":"0.8rem",left:"3rem",top:"50%","margin-top":" -0.66666667rem","border-radius":" 0.16rem","font-size":"0.4rem",color:"white","text-align":" center",padding:"0.26666667rem 0.13333333rem"};$("#toast").css(o),$("#toast").css("display","block").html(e),setTimeout(function(){$("#toast").css("display","none").html()},t)}var route=myRoutes(),wxShareObj={link:window.location.href,title:document.title,desc:"",imgUrl:"http://img.daodaoclub.com/daodao_logo/daodao_logo_100.png",success:function(){},cancel:function(){}},shareObj={topName:document.title,shareurl:window.location.href,title:document.title,image:"http://img.daodaoclub.com/daodao_logo/daodao_logo_100.png",describe:""},filter={pageIndex:"1"};getList(filter);