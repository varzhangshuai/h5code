function detect(e,i){var o=this.os={},a=this.browser={},r=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),t=e.match(/(Android);?[\s\/]+([\d.]+)?/),s=!!e.match(/\(Macintosh\; Intel /),c=e.match(/(iPad).*OS\s([\d_]+)/),d=e.match(/(iPod)(.*OS\s([\d_]+))?/),h=!c&&e.match(/(iPhone\sOS)\s([\d_]+)/),n=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),m=/Win\d{2}|Windows/.test(i),l=e.match(/Windows Phone ([\d.]+)/),b=n&&e.match(/TouchPad/),v=e.match(/Kindle\/([\d.]+)/),S=e.match(/Silk\/([\d._]+)/),p=e.match(/(BlackBerry).*Version\/([\d.]+)/),f=e.match(/(BB10).*Version\/([\d.]+)/),w=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),k=e.match(/PlayBook/),P=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),u=e.match(/Firefox\/([\d.]+)/),O=e.match(/\((?:Mobile|Tablet); rv:([\d.]+)\).*Firefox\/[\d.]+/),M=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),g=!P&&e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),T=g||e.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/),_=e.match(/weibo/i),x=e.match(/daodaoclub/i);micromessenger=e.match(/micromessenger/i),x&&(o.daodaoclub=!0),x&&(a.daodaoclub=!0),(a.webkit=!!r)&&(a.version=r[1]),t&&(o.android=!0,o.version=t[2]),h&&!d&&(o.ios=o.iphone=!0,o.version=h[2].replace(/_/g,".")),c&&(o.ios=o.ipad=!0,o.version=c[2].replace(/_/g,".")),d&&(o.ios=o.ipod=!0,o.version=d[3]?d[3].replace(/_/g,"."):null),l&&(o.wp=!0,o.version=l[1]),n&&(o.webos=!0,o.version=n[2]),b&&(o.touchpad=!0),p&&(o.blackberry=!0,o.version=p[2]),f&&(o.bb10=!0,o.version=f[2]),w&&(o.rimtabletos=!0,o.version=w[2]),k&&(a.playbook=!0),v&&(o.kindle=!0,o.version=v[1]),S&&(a.silk=!0,a.version=S[1]),!S&&o.android&&e.match(/Kindle Fire/)&&(a.silk=!0),P&&(a.chrome=!0,a.version=P[1]),u&&(a.firefox=!0,a.version=u[1]),O&&(o.firefoxos=!0,o.version=O[1]),M&&(a.ie=!0,a.version=M[1]),T&&(s||o.ios||m)&&(a.safari=!0,o.ios||(a.version=T[1])),g&&(a.webview=!0),_&&(o.weibo=!0),micromessenger&&(o.micromessenger=!0),-1!=e.indexOf("qq/")&&(o.qq=!0),o.tablet=!!(c||k||t&&!e.match(/Mobile/)||u&&e.match(/Tablet/)||M&&!e.match(/Phone/)&&e.match(/Touch/)),o.phone=!(o.tablet||o.ipod||!(t||h||n||p||f||P&&e.match(/Android/)||P&&e.match(/CriOS\/([\d.]+)/)||u&&e.match(/Mobile/)||M&&e.match(/Touch/)))}